# ホームページ（"/"）UIテスト設計書

## 概要

Historical Travel Agentアプリケーションのホームページ（"/"）に対するUIテストの設計書です。
ユーザーが最初に訪れるページとして、適切な情報表示とナビゲーションが機能することを検証します。

## テスト対象

- **ページ**: `/` (ホームページ)
- **コンポーネント**: `frontend/src/app/page.tsx`
- **テストフレームワーク**: Vitest + React Testing Library
- **テスト環境**: jsdom

## テストケース一覧

### 1. 基本表示テスト

#### 1.1 ページタイトルと説明の表示
- **テストID**: `home-basic-display-001`
- **目的**: ページの基本情報が正しく表示されることを確認
- **テスト内容**:
  - アプリ名「Historical Travel Agent」がh1要素として表示される
  - アプリ説明「歴史学習特化型旅行AIエージェント」が表示される
  - ヒーローサブタイトルが表示される
- **期待結果**: 全ての基本情報が正しく表示される

#### 1.2 セクション見出しの表示
- **テストID**: `home-basic-display-002`
- **目的**: 各セクションの見出しが正しく表示されることを確認
- **テスト内容**:
  - 「主な機能」セクション見出しが表示される
  - 「使い方」セクション見出しが表示される
  - 「さあ、歴史を学ぶ旅を始めましょう」セクション見出しが表示される
- **期待結果**: 全てのセクション見出しが正しく表示される

### 2. ナビゲーション・リンクテスト

#### 2.1 メインCTAボタンの表示と機能
- **テストID**: `home-navigation-001`
- **目的**: メインCTAボタンが正しく表示され、適切なリンクを持つことを確認
- **テスト内容**:
  - 「新しい旅行を作成」ボタンが表示される
  - ボタンが`/travel/new`へのリンクを持つ
  - 「旅行一覧を見る」ボタンが表示される
  - ボタンが`/travel`へのリンクを持つ
- **期待結果**: 両方のボタンが正しく表示され、適切なhref属性を持つ

#### 2.2 最終CTAボタンの表示と機能
- **テストID**: `home-navigation-002`
- **目的**: 最終CTAボタンが正しく表示され、適切なリンクを持つことを確認
- **テスト内容**:
  - 「今すぐ始める」ボタンが表示される
  - ボタンが`/travel/new`へのリンクを持つ
- **期待結果**: ボタンが正しく表示され、適切なhref属性を持つ

### 3. コンテンツ表示テスト

#### 3.1 機能カードの表示
- **テストID**: `home-content-001`
- **目的**: 主な機能セクションの3つの機能カードが正しく表示されることを確認
- **テスト内容**:
  - 「事前学習ガイド生成」カードが表示される（絵文字: 📚）
  - 「歴史年表と地図」カードが表示される（絵文字: 🗺️）
  - 「旅行後の振り返り」カードが表示される（絵文字: 📸）
  - 各カードにタイトルと説明文が表示される
- **期待結果**: 3つの機能カードが正しく表示され、適切な内容を持つ

#### 3.2 使い方ステップの表示
- **テストID**: `home-content-002`
- **目的**: 使い方セクションの4つのステップが正しく表示されることを確認
- **テスト内容**:
  - ステップ1「旅行計画を作成」が表示される（番号: 1）
  - ステップ2「旅行ガイドを確認」が表示される（番号: 2）
  - ステップ3「旅行を楽しむ」が表示される（番号: 3）
  - ステップ4「振り返りを作成」が表示される（番号: 4）
  - 各ステップに番号、タイトル、説明文が表示される
- **期待結果**: 4つのステップが正しい順序で表示され、適切な内容を持つ

### 4. レスポンシブデザインテスト

#### 4.1 モバイル表示の確認
- **テストID**: `home-responsive-001`
- **目的**: モバイルサイズでの表示が適切であることを確認
- **テスト内容**:
  - ビューポートを375px幅に設定
  - CTAボタンが縦並び（flex-col）で表示される
  - 機能カードが1列で表示される
  - テキストサイズが適切に調整される
- **期待結果**: モバイル表示で適切にレイアウトが調整される

#### 4.2 タブレット表示の確認
- **テストID**: `home-responsive-002`
- **目的**: タブレットサイズでの表示が適切であることを確認
- **テスト内容**:
  - ビューポートを768px幅に設定
  - 機能カードが2列で表示される
  - CTAボタンが横並び（flex-row）で表示される
- **期待結果**: タブレット表示で適切にレイアウトが調整される

#### 4.3 デスクトップ表示の確認
- **テストID**: `home-responsive-003`
- **目的**: デスクトップサイズでの表示が適切であることを確認
- **テスト内容**:
  - ビューポートを1024px幅に設定
  - 機能カードが3列で表示される
  - 大きなフォントサイズが適用される
- **期待結果**: デスクトップ表示で適切にレイアウトが調整される

### 5. アクセシビリティテスト

#### 5.1 セマンティックHTML構造の確認
- **テストID**: `home-accessibility-001`
- **目的**: 適切なHTML構造とセマンティクスが使用されていることを確認
- **テスト内容**:
  - h1要素がページに1つだけ存在する
  - h2要素が適切な階層で使用されている
  - h3要素が適切な階層で使用されている
  - section要素が適切に使用されている
- **期待結果**: 適切なHTML構造とセマンティクスが実装されている

#### 5.2 ARIA属性とアクセシビリティの確認
- **テストID**: `home-accessibility-002`
- **目的**: アクセシビリティ属性が適切に設定されていることを確認
- **テスト内容**:
  - 絵文字にaria-labelが設定されている
  - ボタンに適切なaria属性が設定されている
  - リンクに適切なaria属性が設定されている
- **期待結果**: 適切なアクセシビリティ属性が設定されている

#### 5.3 キーボードナビゲーションの確認
- **テストID**: `home-accessibility-003`
- **目的**: キーボードでのナビゲーションが適切に機能することを確認
- **テスト内容**:
  - Tabキーでフォーカス可能な要素を順次移動できる
  - Enterキーでリンクを活性化できる
  - フォーカス表示が適切に表示される
- **期待結果**: キーボードナビゲーションが適切に機能する

### 6. パフォーマンステスト

#### 6.1 初期レンダリング時間の確認
- **テストID**: `home-performance-001`
- **目的**: ページの初期レンダリングが適切な時間で完了することを確認
- **テスト内容**:
  - コンポーネントのマウント時間を測定
  - 全ての要素が適切にレンダリングされる時間を測定
- **期待結果**: 初期レンダリングが合理的な時間で完了する

### 7. エラーハンドリングテスト

#### 7.1 定数データの欠損時の動作確認
- **テストID**: `home-error-001`
- **目的**: 定数データが欠損した場合の動作を確認
- **テスト内容**:
  - 機能データが空配列の場合の表示
  - ステップデータが空配列の場合の表示
  - 定数が未定義の場合のフォールバック動作
- **期待結果**: データ欠損時も適切にエラーハンドリングされる

## テスト実装方針

### 使用ライブラリ
- **Vitest**: テストランナー
- **React Testing Library**: コンポーネントテスト
- **@testing-library/jest-dom**: DOM assertion拡張
- **@testing-library/user-event**: ユーザーインタラクションシミュレーション

### テストファイル構成
```
frontend/src/app/page.test.tsx (既存)
├── 基本表示テスト
├── ナビゲーション・リンクテスト
├── コンテンツ表示テスト
├── レスポンシブデザインテスト
├── アクセシビリティテスト
├── パフォーマンステスト
└── エラーハンドリングテスト
```

### テスト実行コマンド
```bash
# 全テスト実行
pnpm test

# ホームページテストのみ実行
pnpm test page.test.tsx

# ウォッチモードでテスト実行
pnpm test --watch

# カバレッジ付きテスト実行
pnpm test --coverage
```

### モックとスタブ
- **Next.js Link**: テスト環境での適切なモック設定
- **定数データ**: テスト用のモックデータ準備
- **レスポンシブテスト**: ビューポートサイズのモック

## 優先度

### 高優先度（必須）
- 基本表示テスト（1.1, 1.2）
- メインナビゲーションテスト（2.1, 2.2）
- 主要コンテンツ表示テスト（3.1, 3.2）
- 基本アクセシビリティテスト（5.1）

### 中優先度（推奨）
- レスポンシブデザインテスト（4.1, 4.2, 4.3）
- 詳細アクセシビリティテスト（5.2, 5.3）

### 低優先度（オプション）
- パフォーマンステスト（6.1）
- エラーハンドリングテスト（7.1）

## 注意事項

1. **定数の変更**: UI定数が変更された場合、テストケースも合わせて更新する
2. **レスポンシブテスト**: 実際のブレークポイントと一致させる
3. **アクセシビリティ**: WCAG 2.1 AA基準に準拠する
4. **パフォーマンス**: 実際のユーザー体験を考慮した測定基準を設定する
5. **メンテナンス**: 機能追加時は対応するテストケースも追加する

## 更新履歴

| 日付 | 更新者 | 更新内容 |
|------|--------|----------|
| 2026-01-19 | - | 初版作成 |