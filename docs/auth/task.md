認証機能 TODOリスト (順番)

フェーズ0: インターフェース固定
- [ ] 認証ヘッダー形式を確定 (Authorization: Bearer <ID Token>)
- [ ] 認証失敗時のHTTPステータスを確定 (401/403)
- [ ] ユーザーコンテキスト項目を確定 (uid/email/name/provider)
- [ ] 適用対象APIの第一弾を決定 (旅行計画作成/取得/取得詳細/更新)
- [ ] 公開エンドポイントを残す方針を確定 (ヘルスチェック、静的コンテンツ)

フェーズ1: フロント先行
- [ ] Firebaseプロジェクトを作成 (開発/本番)
- [ ] Firebase AuthenticationでEmail/PasswordとGoogleを有効化
- [ ] Webアプリを作成してSDK設定値を取得
- [ ] frontend/src/lib/firebase.ts を追加してSDK初期化
- [ ] 認証状態管理フックを追加 (例: useAuth)
- [ ] サインイン/サインアウトUIを追加
- [ ] APIクライアントにIDトークン付与を実装
- [ ] UI文言をfrontend/src/constantsに追加

フェーズ2: バックエンド認証
- [ ] Firebase Admin SDK初期化を追加
- [ ] 認証ミドルウェアを追加 (token検証/コンテキスト付与)
- [ ] 旅行計画APIに認証ミドルウェアを適用
- [ ] 認証失敗時のレスポンスを統一
- [ ] トークンをログに出さないことを確認

フェーズ3: データモデル対応
- [ ] TravelPlanにowner_uidを追加
- [ ] 取得系でowner_uidフィルタを適用
- [ ] 既存データ移行スクリプトを準備
- [ ] 統合テストでエンドツーエンドを確認

検証/仕上げ
- [ ] フロントの未認証時ガードを確認
- [ ] 認証必須APIが401/403で制御されることを確認
- [ ] E2EでサインインからAPI操作まで通ることを確認
